---
import posterImg from "../../assets/img/Aerial Autumn Vineyard.JPG";
import { Image } from "astro:assets";
---

<header class="relative h-screen">
  <Image
    src={posterImg}
    alt="Aerial view of an autumn vineyard"
    class="fixed inset-0 w-full h-full object-cover z-0 scale-110 origin-center rotate-2"
    loading="eager"
    fetchpriority="high"
    quality="mid"
    formats={['avif', 'webp']}
  />
  <!-- Content Wrapper anchored to bottom-left -->
  <div id="hero-content" class="fixed bottom-0 left-0 w-full md:w-[44%] lg:w-[38%] z-10 will-change-transform">
    <!-- Angled Background Layer -->
    <div
      class="absolute inset-0 bg-white/75 backdrop-blur-sm -z-10"
      style="clip-path: polygon(0 0, 100% 0, 88% 100%, 0 100%);"
    >
    </div>

    <!-- Text Content -->
    <div class="p-8 md:px-10 md:py-10 pb-16 flex flex-col items-start">
      <h1
        class="text-3xl md:text-3xl lg:text-4xl font-bold text-[#0B2545] mb-4 md:mb-3 leading-tight"
      >
        New Zealandâ€™s Leading Water Management Specialists
      </h1>
      <p class="text-base md:text-base text-gray-800 mb-6 md:mb-4 leading-relaxed">
        Delivering expert design, build, and maintenance for irrigation systems.
      </p>

      <!-- Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 mb-2">
        <a
          href="/contact"
          class="px-6 py-2.5 bg-[#0B2545] hover:bg-[#1D3A75] text-white font-semibold rounded-md transition shadow-md text-center text-sm md:text-base"
        >
          Contact Us
        </a>
        <a
          href="#services"
          class="px-6 py-2.5 bg-transparent border-2 border-[#0B2545] hover:bg-white/50 text-[#0B2545] font-semibold rounded-md transition text-center text-sm md:text-base"
        >
          View Services
        </a>
      </div>
    </div>
  </div>
</header>
<script>
  const heroContent = document.getElementById("hero-content");
  
  if (heroContent) {
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      
      // Calculate move: slide left faster than scroll for dynamic feel
      // Fade out as it moves
      const slideX = Math.min(0, -scrollY * 1.2); 
      const opacity = Math.max(0, 1 - scrollY / 500);
      
      heroContent.style.transform = `translateX(${slideX}px)`;
      heroContent.style.opacity = opacity.toString();
      
      // Disable interactions once mostly hidden to prevent blocking clicks
      if (opacity < 0.1) {
        heroContent.style.pointerEvents = "none";
      } else {
        heroContent.style.pointerEvents = "auto";
      }
    });
  }
</script>
