---
import Layout from "../../layouts/Layout.astro";
import { features } from "../../Data/features.js";
import { Image } from 'astro:assets';

// Import images for the services map
import imgIrrigation from "../../assets/img/Aerial Orchard.JPG";
import imgPump from "../../assets/img/Industrial Filtration Pump Hub.jpg";
import imgFertigation from "../../assets/img/Outdoor Mixing Station.jpg";
import imgElectrical from "../../assets/img/Pump Room 2.jpg";

// Hero Image
import heroImage from "../../assets/img/Aerial Tunnel House - Horiculture.jpg";
import waterBladder from "../../assets/img/Aerial Water Bladder.jpg";

const imageMap = {
  irrigation: imgIrrigation,
  pump: imgPump,
  fertigation: imgFertigation,
  electrical: imgElectrical,
};

const title = "Our Services | PB&J Contracting";
---

<Layout title={title}>
  <!-- Hero Section -->
  <div class="relative w-full h-[50vh] min-h-[400px]">
    <Image
      src={heroImage}
      alt="Aerial view of horticulture tunnel houses"
      class="absolute inset-0 w-full h-full object-cover"
      loading="eager"
      fetchpriority="high"
      quality="mid"
      formats={['avif', 'webp']}
    />
    <div class="absolute inset-0 bg-gradient-to-r from-[#0B2545]/90 to-transparent flex flex-col justify-center px-10 md:px-20">
      <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
        Services
      </h1>
      <p class="text-xl md:text-2xl text-gray-200 max-w-xl">
        Comprehensive water management solutions for agriculture and industry.
      </p>
    </div>
  </div>

  <!-- Intro Block -->
  <section class="py-16 bg-neutral-50 text-center">
    <div class="max-w-4xl mx-auto px-6">
      <h2 class="text-3xl font-bold text-[#0B2545] mb-6">
        Sustainable solutions for water management
      </h2>
      <p class="text-lg text-gray-600 leading-relaxed">
        With a region-wide presence and solutions-focused approach,
        PB&J Contracting addresses water challenges in horticultural,
        commercial and municipal sectors across New Zealand.
      </p>
    </div>
  </section>

  <!-- Service Grid (Card Style) -->
  <section class="py-12 bg-neutral-100">
    <div class="max-w-7xl mx-auto px-6">
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {features.map((feature) => (
             <a href={`/services/${feature.slug}`} class="group bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col h-full border border-gray-100">
                {/* Image Top */}
                <div class="h-48 overflow-hidden relative">
                   <Image 
                      src={imageMap[feature.imageKey]} 
                      alt={feature.title}
                      class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"
                      widths={[400, 800]}
                      sizes="(max-width: 768px) 100vw, 400px"
                      formats={['avif', 'webp']}
                   />
                   <div class="absolute inset-0 bg-[#0B2545]/0 group-hover:bg-[#0B2545]/10 transition-colors duration-300"></div>
                </div>

                {/* Content */}
                <div class="p-6 flex flex-col flex-grow relative">
                   <h3 class="text-xl font-bold text-[#0B2545] mb-3 group-hover:text-accent transition-colors">
                      {feature.title}
                   </h3>
                   <p class="text-gray-600 text-sm mb-8 line-clamp-3">
                      {feature.description}
                   </p>
                   
                   {/* Bottom Link Style */}
                   <div class="mt-auto flex items-center text-[#0B2545] font-bold text-sm uppercase tracking-wide group-hover:text-accent transition-colors">
                      Learn More 
                      <svg class="w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                   </div>
                   
                   {/* Brand Stripe Bottom */}
                   <div class="absolute bottom-0 left-0 w-full h-1 bg-[#0B2545] group-hover:bg-accent transition-colors"></div>
                </div>
             </a>
          ))}
       </div>
    </div>
  </section>

  <!-- Partnering for Progress Section -->
  <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
          <div class="w-full md:w-1/2">
              <h2 class="text-3xl md:text-4xl font-bold text-[#0B2545] mb-6">Partnering for progress</h2>
              <p class="text-gray-600 mb-6 leading-relaxed">
                  We understand the vital role that water plays in supporting New Zealand's industries and communities. 
                  Our teams support councils, consultants and growers to ensure reliable water supply, optimal usage, and long-term sustainability.
              </p>
              <p class="text-gray-600 mb-8 leading-relaxed">
                  From water sourcing and treatment to distribution and management, we provide end-to-end solutions that meet the diverse needs of New Zealand's landscapes and communities.
              </p>
              <a href="/contact" class="inline-block bg-[#0B2545] text-white font-bold py-3 px-6 rounded hover:bg-[#1D3A75] transition-colors">
                  Enquire Now &rarr;
              </a>
          </div>
          <div class="w-full md:w-1/2">
             <!-- Placeholder for a team or project collaborative shot -->
             <div class="rounded-lg overflow-hidden shadow-lg h-[400px]">
                <Image 
                    src={waterBladder} 
                    alt="PB&J Team on site" 
                    class="w-full h-full object-cover"
                />
             </div>
          </div>
      </div>
  </section>

  <!-- Need Support Banner -->
  <section class="py-16 bg-[#005ea2] relative overflow-hidden">
     <!-- Abstract Background shapes or overlay could go here -->
     <div class="absolute inset-0 opacity-10 bg-[url('/path/to/texture.png')]"></div>
     
     <div class="max-w-4xl mx-auto px-6 text-center relative z-10 text-white">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Need support?</h2>
        <p class="text-lg text-blue-100 mb-8 max-w-2xl mx-auto">
            Need support with your orchard irrigation, pump station or infrastructure? 
            Your local PB&J representative is only a call away.
        </p>
        <a href="/contact" class="inline-block border-2 border-white text-white font-bold py-3 px-8 rounded hover:bg-white hover:text-[#005ea2] transition-colors">
             Get in Touch &rarr;
        </a>
     </div>
  </section>

</Layout>
